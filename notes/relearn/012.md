脚本和模块
- 脚本是可以由浏览器或者 `node` 环境引入执行的，而模块只能由 JavaScript 代码用 `import` 引入执行
- 脚本具有主动性，是控制宿主完成一定任务的代码；模块是被动性的 JavaScript 代码段，是等待被调用的库
- 引入模块，必须给 `script` 标签添加 `type="module"`
- 脚本中可以包含语句；模块中可以包含三种内容：`import` 声明，`export` 声明和语句

`import` 声明，引入
- 直接引入，只是保证了这个模块代码被执行 `import "mod"; //引入一个模块`
- 带 `from` 的 `import` 引入模块中的一部分信息，可以把它们变成本地的变量
  - `import x from "./a.js"` 引入模块中导出的默认值。
  - `import {a as x, modify} from "./a.js";` 引入模块中的变量。
  - `import * as x from "./a.js"` 把模块中所有的变量以类似对象属性的方式引入。

`export` 声明，导出
- 一个 `export` 关键字加上变量名列表
  - `var`
  - `function (含 async 和 generator)`
  - `class`
  - `let`
  - `const`
- 跟 `default` 联合使用，表示导出一个默认变量值
  - 可以用于 `function` 和 `class`
  - 后面跟一个表达式，`var a = {}; export default a;` 导出普通变量 `a` 的值，后续 `a` 变量和导出值无关
- `export from`  `export a from "a.js"`


4种函数体：
- 普通函数
- 异步函数体
- 生成器函数体
- 异步生成器函数体

函数体、模块和脚本能使用的语句

||||||
|:--:|:--:|:--:|:--:|:--:|
|类型|yield|await|return|import&export|
|普通函数|×|×|√|×|
|异步函数体|×|√|√|×|
|生成器函数体|√|×|√|×|
|异步生成器函数体|√|√|√|×|
|脚本|×|×|×|×|
|模块|×|×|×|√|


预处理，针对脚本、模块和函数体中的语句进行预处理

预处理过程将会提前处理 `var`、函数声明、`class`、`const` 和 `let` 这些语句，以确定其中变量的意义
- `var` 声明永远作用于脚本、模块和函数体这个级别，在预处理阶段，不关心赋值的部分，只管在当前作用域声明这个变量 `IIFE`
- `function` 声明
  - 全局作用域，与 `var` 差不多
  - 局部作用域，`function` 在预处理阶段仍然发生了作用，在作用域中产生了变量，没有产生赋值，赋值行为发生在了执行阶段
- `class` 声明
  - 声明前使用 `class` 会抛错
  - 会被预处理的，它会在作用域中创建变量，并且要求访问它时抛出错误
  - 只有写在全局环境才会有声明作用

指令序言机制：脚本和模块都支持一种特别的语法，叫做指令序言（`Directive Prologs`）
- 最早是为了 `use strict` 设计的，规定了一种给 JavaScript 代码添加元信息的方式
  - `use strict` 是 JavaScript 标准中规定的唯一一种指令序言
- 设计指令序言的目的是，留给 JavaScript 的引擎和实现者一些统一的表达方式，在静态扫描时指定 JavaScript 代码的一些特性
- 只有一个字符串直接量的表达式语句，它只能出现在脚本、模块和函数体的最前面
